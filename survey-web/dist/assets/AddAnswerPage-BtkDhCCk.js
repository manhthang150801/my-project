import{r as n,j as e,S as L,M}from"./index-Ca3LY0Wa.js";const E=()=>{const f="/api/v1",[a,u]=n.useState({answerName:"",answerValue:""}),[s,r]=n.useState({answerName:"",answerValue:""}),[x,d]=n.useState(!1),[p,w]=n.useState(""),[N,y]=n.useState(""),[j,b]=n.useState(!1),[v,c]=n.useState(!1),[m,S]=n.useState(""),g=l=>{const{name:t,value:o}=l.target;u({...a,[t]:o}),r({...s,[t]:""})},T=()=>a.answerName.trim()?a.answerName.length>100?(r({...s,answerName:"Tên câu trả lời không được dài quá 100 ký tự."}),!1):a.answerValue.trim()?isNaN(a.answerValue)?(r({...s,answerValue:"Giá trị câu trả lời phải là một số."}),!1):!0:(r({...s,answerValue:"Giá trị câu trả lời không được để trống."}),!1):(r({...s,answerName:"Tên câu trả lời không được để trống."}),!1),V=async()=>{if(T()){c(!0);try{const l=localStorage.getItem("token"),t=await fetch(`${f}/answers`,{method:"POST",headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"},body:JSON.stringify(a)});if(t.status===401){const C=await t.json();S(C.detail),i("Thông báo","Phiên đăng nhập đã hết hạn, vui lòng đăng nhập lại.",!0),c(!1);return}const o=await t.json();o&&o.message==="saved"?i("Thành công","Lưu thành công!",!1):i("Lỗi","Lưu không thành công.",!0)}catch{i("Lỗi","Có lỗi xảy ra.",!0)}finally{h(),c(!1)}}},h=()=>{u({answerName:"",answerValue:""}),r({answerName:"",answerValue:""})},i=(l,t,o)=>{w(l),y(t),b(o),d(!0)},k=()=>{d(!1),(m=="invalid_token"||m=="jwt_error")&&(localStorage.removeItem("token"),localStorage.removeItem("username"),localStorage.removeItem("roles"),navigate("/"))};return e.jsxs("div",{className:"flex items-center justify-center min-h-screen p-4 bg-gray-100 relative",children:[v&&e.jsx("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-50 flex items-center justify-center z-50",children:e.jsx(L,{})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-800 text-center",children:"Thêm Câu Trả Lời"}),e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"answerName",className:"block text-gray-700 font-medium mb-2",children:"Tên Câu Trả Lời"}),e.jsx("input",{type:"text",id:"answerName",name:"answerName",value:a.answerName,onChange:g,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring focus:ring-indigo-300",placeholder:"Nhập tên câu trả lời"}),s.answerName&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:s.answerName})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"answerValue",className:"block text-gray-700 font-medium mb-2",children:"Giá Trị Câu Trả Lời"}),e.jsx("input",{type:"text",id:"answerValue",name:"answerValue",value:a.answerValue,onChange:g,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring focus:ring-indigo-300",placeholder:"Nhập giá trị câu trả lời"}),s.answerValue&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:s.answerValue})]}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx("button",{type:"button",onClick:V,className:"px-4 py-2 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 focus:outline-none focus:ring focus:ring-indigo-300",children:"Lưu"}),e.jsx("button",{type:"button",onClick:h,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 focus:outline-none focus:ring focus:ring-gray-200",children:"Hủy"})]})]})]}),e.jsx(M,{isOpen:x,onClose:k,title:p,message:N,isError:j})]})};export{E as default};
