import{r as n,j as e,S as L,M as I}from"./index-Ca3LY0Wa.js";const O=()=>{const b="/api/v1",[s,d]=n.useState({jobCode:"",jobName:""}),[r,i]=n.useState({jobCode:"",jobName:""}),[j,g]=n.useState(!1),[p,f]=n.useState(""),[x,N]=n.useState(""),[y,v]=n.useState(!1),[C,c]=n.useState(!1),[m,S]=n.useState(""),h=o=>{const{name:t,value:a}=o.target;d({...s,[t]:a}),i({...r,[t]:""})},k=()=>{let o=!0;const t={jobCode:"",jobName:""};return s.jobCode.trim()?s.jobCode.length>50&&(t.jobCode="Mã nghề nghiệp không được dài quá 50 ký tự.",o=!1):(t.jobCode="Mã nghề nghiệp không được để trống.",o=!1),s.jobName.trim()?s.jobName.length>100&&(t.jobName="Tên nghề nghiệp không được dài quá 100 ký tự.",o=!1):(t.jobName="Tên nghề nghiệp không được để trống.",o=!1),i(t),o},M=async()=>{if(k()){c(!0);try{const o=localStorage.getItem("token"),t=await fetch(`${b}/jobs`,{method:"POST",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify(s)});if(t.status===401){const T=await t.json();S(T.detail),l("Thông báo","Phiên đăng nhập đã hết hạn, vui lòng đăng nhập lại.",!0),c(!1);return}const a=await t.json();a&&a.message==="saved"?l("Thành công","Lưu thành công!",!1):l("Lỗi","Lưu không thành công.",!0)}catch{l("Lỗi","Có lỗi xảy ra.",!0)}finally{u(),c(!1)}}},u=()=>{d({jobCode:"",jobName:""}),i({jobCode:"",jobName:""})},l=(o,t,a)=>{f(o),N(t),v(a),g(!0)},w=()=>{g(!1),(m=="invalid_token"||m=="jwt_error")&&(localStorage.removeItem("token"),localStorage.removeItem("username"),localStorage.removeItem("roles"),navigate("/"))};return e.jsxs("div",{className:"flex items-center justify-center min-h-screen p-4 bg-gray-100 relative",children:[C&&e.jsx("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-50 flex items-center justify-center z-50",children:e.jsx(L,{})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-800 text-center",children:"Thêm Nghề Nghiệp"}),e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"jobCode",className:"block text-gray-700 font-medium mb-2",children:"Mã Nghề Nghiệp"}),e.jsx("input",{type:"text",id:"jobCode",name:"jobCode",value:s.jobCode,onChange:h,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring focus:ring-indigo-300",placeholder:"Nhập mã nghề nghiệp"}),r.jobCode&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:r.jobCode})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"jobName",className:"block text-gray-700 font-medium mb-2",children:"Tên Nghề Nghệp"}),e.jsx("input",{type:"text",id:"jobName",name:"jobName",value:s.jobName,onChange:h,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring focus:ring-indigo-300",placeholder:"Nhập tên nghề nghiệp"}),r.jobName&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:r.jobName})]}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx("button",{type:"button",onClick:M,className:"px-4 py-2 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 focus:outline-none focus:ring focus:ring-indigo-300",children:"Lưu"}),e.jsx("button",{type:"button",onClick:u,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 focus:outline-none focus:ring focus:ring-gray-200",children:"Hủy"})]})]})]}),e.jsx(I,{isOpen:j,onClose:w,title:p,message:x,isError:y})]})};export{O as default};
