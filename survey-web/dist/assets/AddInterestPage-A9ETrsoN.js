import{r as n,j as e,S as D,M as E}from"./index-Ca3LY0Wa.js";const M=()=>{const x="/api/v1",[t,m]=n.useState({netSocCode:"",title:"",elementId:"",elementName:"",scaleId:"",scaleName:"",dataValue:""}),[l,i]=n.useState({netSocCode:"",title:"",elementId:"",elementName:"",scaleId:"",scaleName:"",dataValue:""}),[p,u]=n.useState(!1),[N,f]=n.useState(""),[b,j]=n.useState(""),[y,S]=n.useState(!1),[I,d]=n.useState(!1),[g,v]=n.useState(""),o=a=>{const{name:s,value:c}=a.target;m({...t,[s]:c}),i({...l,[s]:""})},C=()=>{const a={};return t.netSocCode.trim()||(a.netSocCode="NetSoc Code không được để trống."),t.title.trim()||(a.title="Title không được để trống."),t.elementId.trim()||(a.elementId="Element ID không được để trống."),t.elementName.trim()||(a.elementName="Element Name không được để trống."),t.scaleId.trim()||(a.scaleId="Scale ID không được để trống."),t.scaleName.trim()||(a.scaleName="Scale Name không được để trống."),t.dataValue.trim()||(a.dataValue="Data Value không được để trống."),i(a),Object.keys(a).length===0},k=async()=>{if(C()){d(!0);try{const a=localStorage.getItem("token"),s=await fetch(`${x}/interests`,{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify(t)});if(s.status===401){const V=await s.json();v(V.detail),r("Thông báo","Phiên đăng nhập đã hết hạn, vui lòng đăng nhập lại.",!0),d(!1);return}const c=await s.json();c&&c.message==="saved"?r("Thành công","Lưu thành công!",!1):r("Lỗi","Lưu không thành công.",!0)}catch{r("Lỗi","Có lỗi xảy ra.",!0)}finally{h(),d(!1)}}},h=()=>{m({netSocCode:"",title:"",elementId:"",elementName:"",scaleId:"",scaleName:"",dataValue:""}),i({netSocCode:"",title:"",elementId:"",elementName:"",scaleId:"",scaleName:"",dataValue:""})},r=(a,s,c)=>{f(a),j(s),S(c),u(!0)},w=()=>{u(!1),(g=="invalid_token"||g=="jwt_error")&&(localStorage.removeItem("token"),localStorage.removeItem("username"),localStorage.removeItem("roles"),navigate("/"))};return e.jsxs("div",{className:"flex items-center justify-center min-h-screen p-4 bg-gray-100 relative",children:[I&&e.jsx("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-50 flex items-center justify-center z-50",children:e.jsx(D,{})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-800 text-center",children:"Thêm Sở Thích"}),e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"netSocCode",className:"block text-gray-700 font-medium mb-2",children:"NetSoc Code"}),e.jsx("input",{type:"text",id:"netSocCode",name:"netSocCode",value:t.netSocCode,onChange:o,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring focus:ring-indigo-300",placeholder:"Nhập NetSoc Code"}),l.netSocCode&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:l.netSocCode})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"title",className:"block text-gray-700 font-medium mb-2",children:"Title"}),e.jsx("input",{type:"text",id:"title",name:"title",value:t.title,onChange:o,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring focus:ring-indigo-300",placeholder:"Nhập title"}),l.title&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:l.title})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"elementId",className:"block text-gray-700 font-medium mb-2",children:"Element ID"}),e.jsx("input",{type:"text",id:"elementId",name:"elementId",value:t.elementId,onChange:o,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring focus:ring-indigo-300",placeholder:"Nhập Element ID"}),l.elementId&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:l.elementId})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"elementName",className:"block text-gray-700 font-medium mb-2",children:"Element Name"}),e.jsx("input",{type:"text",id:"elementName",name:"elementName",value:t.elementName,onChange:o,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring focus:ring-indigo-300",placeholder:"Nhập Element Name"}),l.elementName&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:l.elementName})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"scaleId",className:"block text-gray-700 font-medium mb-2",children:"Scale ID"}),e.jsx("input",{type:"text",id:"scaleId",name:"scaleId",value:t.scaleId,onChange:o,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring focus:ring-indigo-300",placeholder:"Nhập Scale ID"}),l.scaleId&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:l.scaleId})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"scaleName",className:"block text-gray-700 font-medium mb-2",children:"Scale Name"}),e.jsx("input",{type:"text",id:"scaleName",name:"scaleName",value:t.scaleName,onChange:o,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring focus:ring-indigo-300",placeholder:"Nhập Scale Name"}),l.scaleName&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:l.scaleName})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"dataValue",className:"block text-gray-700 font-medium mb-2",children:"Data Value"}),e.jsx("input",{type:"text",id:"dataValue",name:"dataValue",value:t.dataValue,onChange:o,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring focus:ring-indigo-300",placeholder:"Nhập Data Value"}),l.dataValue&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:l.dataValue})]}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx("button",{type:"button",onClick:k,className:"px-4 py-2 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 focus:outline-none focus:ring focus:ring-indigo-300",children:"Lưu"}),e.jsx("button",{type:"button",onClick:h,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 focus:outline-none focus:ring focus:ring-gray-200",children:"Hủy"})]})]})]}),e.jsx(E,{isOpen:p,onClose:w,title:N,message:b,isError:y})]})};export{M as default};
