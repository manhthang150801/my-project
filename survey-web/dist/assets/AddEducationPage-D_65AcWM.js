import{r as a,j as e,S as L,M as I}from"./index-pkM7sRJn.js";const O=()=>{const f="/api/v1",[o,d]=a.useState({educationCode:"",educationName:""}),[t,c]=a.useState({educationCode:"",educationName:""}),[x,u]=a.useState(!1),[p,N]=a.useState(""),[y,v]=a.useState(""),[j,b]=a.useState(!1),[C,l]=a.useState(!1),[m,S]=a.useState(""),g=s=>{const{name:n,value:i}=s.target;d({...o,[n]:i}),c({...t,[n]:""})},k=()=>o.educationCode.trim()?o.educationName.trim()?o.educationName.length>100?(c({...t,educationName:"Tên học vấn không được dài quá 100 ký tự."}),!1):!0:(c({...t,educationName:"Tên học vấn không được để trống."}),!1):(c({...t,educationCode:"Mã học vấn không được để trống."}),!1),M=async()=>{if(k()){l(!0);try{const s=localStorage.getItem("token"),n=await fetch(`${f}/educations`,{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify(o)});if(n.status===401){const w=await n.json();S(w.detail),r("Thông báo","Phiên đăng nhập đã hết hạn, vui lòng đăng nhập lại.",!0),l(!1);return}const i=await n.json();i&&i.message==="saved"?r("Thành công","Lưu thành công!",!1):r("Lỗi","Lưu không thành công.",!0)}catch{r("Lỗi","Có lỗi xảy ra.",!0)}finally{h(),l(!1)}}},h=()=>{d({educationCode:"",educationName:""}),c({educationCode:"",educationName:""})},r=(s,n,i)=>{N(s),v(n),b(i),u(!0)},T=()=>{u(!1),(m=="invalid_token"||m=="jwt_error")&&(localStorage.removeItem("token"),localStorage.removeItem("username"),localStorage.removeItem("roles"),navigate("/"))};return e.jsxs("div",{className:"flex items-center justify-center min-h-screen p-4 bg-gray-100 relative",children:[C&&e.jsx("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-50 flex items-center justify-center z-50",children:e.jsx(L,{})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-800 text-center",children:"Thêm Học Vấn"}),e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"educationCode",className:"block text-gray-700 font-medium mb-2",children:"Mã Học Vấn"}),e.jsx("input",{type:"text",id:"educationCode",name:"educationCode",value:o.educationCode,onChange:g,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring focus:ring-indigo-300",placeholder:"Nhập mã học vấn"}),t.educationCode&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:t.educationCode})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"educationName",className:"block text-gray-700 font-medium mb-2",children:"Tên Học Vấn"}),e.jsx("input",{type:"text",id:"educationName",name:"educationName",value:o.educationName,onChange:g,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring focus:ring-indigo-300",placeholder:"Nhập tên học vấn"}),t.educationName&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:t.educationName})]}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx("button",{type:"button",onClick:M,className:"px-4 py-2 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 focus:outline-none focus:ring focus:ring-indigo-300",children:"Lưu"}),e.jsx("button",{type:"button",onClick:h,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 focus:outline-none focus:ring focus:ring-gray-200",children:"Hủy"})]})]})]}),e.jsx(I,{isOpen:x,onClose:T,title:p,message:y,isError:j})]})};export{O as default};
