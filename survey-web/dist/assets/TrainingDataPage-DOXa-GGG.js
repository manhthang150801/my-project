import{l as we,r as M,u as Ee,j as h,S as ve,m as je,R as xe,i as Ce,M as Se}from"./index-Ca3LY0Wa.js";import{C as Re}from"./ConfirmModal-B375nSTh.js";var me={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/var Te=me.exports,ke;function Oe(){return ke||(ke=1,function(oe,Z){((le,w)=>{oe.exports=w()})(Te,function le(){var w=typeof self<"u"?self:typeof window<"u"?window:w!==void 0?w:{},G,X=!w.document&&!!w.postMessage,P=w.IS_PAPA_WORKER||!1,Y={},fe=0,u={};function U(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(t){var r=de(t);r.chunkSize=parseInt(r.chunkSize),t.step||t.chunk||(r.chunkSize=null),this._handle=new pe(r),(this._handle.streamer=this)._config=r}).call(this,e),this.parseChunk=function(t,r){var a=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<a){let p=this._config.newline;p||(i=this._config.quoteChar||'"',p=this._handle.guessLineEndings(t,i)),t=[...t.split(p).slice(a)].join(p)}this.isFirstChunk&&b(this._config.beforeFirstChunk)&&(i=this._config.beforeFirstChunk(t))!==void 0&&(t=i),this.isFirstChunk=!1,this._halted=!1;var a=this._partialLine+t,i=(this._partialLine="",this._handle.parse(a,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(t=i.meta.cursor,a=(this._finished||(this._partialLine=a.substring(t-this._baseIndex),this._baseIndex=t),i&&i.data&&(this._rowCount+=i.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),P)w.postMessage({results:i,workerId:u.WORKER_ID,finished:a});else if(b(this._config.chunk)&&!r){if(this._config.chunk(i,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=i=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(i.data),this._completeResults.errors=this._completeResults.errors.concat(i.errors),this._completeResults.meta=i.meta),this._completed||!a||!b(this._config.complete)||i&&i.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),a||i&&i.meta.paused||this._nextChunk(),i}this._halted=!0},this._sendError=function(t){b(this._config.error)?this._config.error(t):P&&this._config.error&&w.postMessage({workerId:u.WORKER_ID,error:t,finished:!1})}}function ee(e){var t;(e=e||{}).chunkSize||(e.chunkSize=u.RemoteChunkSize),U.call(this,e),this._nextChunk=X?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(r){this._input=r,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),X||(t.onload=$(this._chunkLoaded,this),t.onerror=$(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!X),this._config.downloadRequestHeaders){var r,a=this._config.downloadRequestHeaders;for(r in a)t.setRequestHeader(r,a[r])}var i;this._config.chunkSize&&(i=this._start+this._config.chunkSize-1,t.setRequestHeader("Range","bytes="+this._start+"-"+i));try{t.send(this._config.downloadRequestBody)}catch(p){this._chunkError(p.message)}X&&t.status===0&&this._chunkError()}},this._chunkLoaded=function(){t.readyState===4&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize||t.responseText.length,this._finished=!this._config.chunkSize||this._start>=(r=>(r=r.getResponseHeader("Content-Range"))!==null?parseInt(r.substring(r.lastIndexOf("/")+1)):-1)(t),this.parseChunk(t.responseText)))},this._chunkError=function(r){r=t.statusText||r,this._sendError(new Error(r))}}function te(e){(e=e||{}).chunkSize||(e.chunkSize=u.LocalChunkSize),U.call(this,e);var t,r,a=typeof FileReader<"u";this.stream=function(i){this._input=i,r=i.slice||i.webkitSlice||i.mozSlice,a?((t=new FileReader).onload=$(this._chunkLoaded,this),t.onerror=$(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var i=this._input,p=(this._config.chunkSize&&(p=Math.min(this._start+this._config.chunkSize,this._input.size),i=r.call(i,this._start,p)),t.readAsText(i,this._config.encoding));a||this._chunkLoaded({target:{result:p}})},this._chunkLoaded=function(i){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(i.target.result)},this._chunkError=function(){this._sendError(t.error)}}function V(e){var t;U.call(this,e=e||{}),this.stream=function(r){return t=r,this._nextChunk()},this._nextChunk=function(){var r,a;if(!this._finished)return r=this._config.chunkSize,t=r?(a=t.substring(0,r),t.substring(r)):(a=t,""),this._finished=!t,this.parseChunk(a)}}function re(e){U.call(this,e=e||{});var t=[],r=!0,a=!1;this.pause=function(){U.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){U.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(i){this._input=i,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){a&&t.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):r=!0},this._streamData=$(function(i){try{t.push(typeof i=="string"?i:i.toString(this._config.encoding)),r&&(r=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(p){this._streamError(p)}},this),this._streamError=$(function(i){this._streamCleanUp(),this._sendError(i)},this),this._streamEnd=$(function(){this._streamCleanUp(),a=!0,this._streamData("")},this),this._streamCleanUp=$(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function pe(e){var t,r,a,i,p=Math.pow(2,53),x=-p,A=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,L=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,g=this,j=0,n=0,l=!1,o=!1,d=[],s={data:[],errors:[],meta:{}};function v(m){return e.skipEmptyLines==="greedy"?m.join("").trim()==="":m.length===1&&m[0].length===0}function C(){if(s&&a&&(z("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+u.DefaultDelimiter+"'"),a=!1),e.skipEmptyLines&&(s.data=s.data.filter(function(c){return!v(c)})),I()){let c=function(T,O){b(e.transformHeader)&&(T=e.transformHeader(T,O)),d.push(T)};if(s)if(Array.isArray(s.data[0])){for(var m=0;I()&&m<s.data.length;m++)s.data[m].forEach(c);s.data.splice(0,1)}else s.data.forEach(c)}function y(c,T){for(var O=e.header?{}:[],k=0;k<c.length;k++){var E=k,_=c[k],_=((q,f)=>(S=>(e.dynamicTypingFunction&&e.dynamicTyping[S]===void 0&&(e.dynamicTyping[S]=e.dynamicTypingFunction(S)),(e.dynamicTyping[S]||e.dynamicTyping)===!0))(q)?f==="true"||f==="TRUE"||f!=="false"&&f!=="FALSE"&&((S=>{if(A.test(S)&&(S=parseFloat(S),x<S&&S<p))return 1})(f)?parseFloat(f):L.test(f)?new Date(f):f===""?null:f):f)(E=e.header?k>=d.length?"__parsed_extra":d[k]:E,_=e.transform?e.transform(_,E):_);E==="__parsed_extra"?(O[E]=O[E]||[],O[E].push(_)):O[E]=_}return e.header&&(k>d.length?z("FieldMismatch","TooManyFields","Too many fields: expected "+d.length+" fields but parsed "+k,n+T):k<d.length&&z("FieldMismatch","TooFewFields","Too few fields: expected "+d.length+" fields but parsed "+k,n+T)),O}var R;s&&(e.header||e.dynamicTyping||e.transform)&&(R=1,!s.data.length||Array.isArray(s.data[0])?(s.data=s.data.map(y),R=s.data.length):s.data=y(s.data,0),e.header&&s.meta&&(s.meta.fields=d),n+=R)}function I(){return e.header&&d.length===0}function z(m,y,R,c){m={type:m,code:y,message:R},c!==void 0&&(m.row=c),s.errors.push(m)}b(e.step)&&(i=e.step,e.step=function(m){s=m,I()?C():(C(),s.data.length!==0&&(j+=m.data.length,e.preview&&j>e.preview?r.abort():(s.data=s.data[0],i(s,g))))}),this.parse=function(m,y,R){var c=e.quoteChar||'"',c=(e.newline||(e.newline=this.guessLineEndings(m,c)),a=!1,e.delimiter?b(e.delimiter)&&(e.delimiter=e.delimiter(m),s.meta.delimiter=e.delimiter):((c=((T,O,k,E,_)=>{var q,f,S,Q;_=_||[",","	","|",";",u.RECORD_SEP,u.UNIT_SEP];for(var ie=0;ie<_.length;ie++){for(var B,ue=_[ie],N=0,H=0,D=0,F=(S=void 0,new ne({comments:E,delimiter:ue,newline:O,preview:10}).parse(T)),J=0;J<F.data.length;J++)k&&v(F.data[J])?D++:(B=F.data[J].length,H+=B,S===void 0?S=B:0<B&&(N+=Math.abs(B-S),S=B));0<F.data.length&&(H/=F.data.length-D),(f===void 0||N<=f)&&(Q===void 0||Q<H)&&1.99<H&&(f=N,q=ue,Q=H)}return{successful:!!(e.delimiter=q),bestDelimiter:q}})(m,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess)).successful?e.delimiter=c.bestDelimiter:(a=!0,e.delimiter=u.DefaultDelimiter),s.meta.delimiter=e.delimiter),de(e));return e.preview&&e.header&&c.preview++,t=m,r=new ne(c),s=r.parse(t,y,R),C(),l?{meta:{paused:!0}}:s||{meta:{paused:!1}}},this.paused=function(){return l},this.pause=function(){l=!0,r.abort(),t=b(e.chunk)?"":t.substring(r.getCharIndex())},this.resume=function(){g.streamer._halted?(l=!1,g.streamer.parseChunk(t,!0)):setTimeout(g.resume,3)},this.aborted=function(){return o},this.abort=function(){o=!0,r.abort(),s.meta.aborted=!0,b(e.complete)&&e.complete(s),t=""},this.guessLineEndings=function(T,c){T=T.substring(0,1048576);var c=new RegExp(W(c)+"([^]*?)"+W(c),"gm"),R=(T=T.replace(c,"")).split("\r"),c=T.split(`
`),T=1<c.length&&c[0].length<R[0].length;if(R.length===1||T)return`
`;for(var O=0,k=0;k<R.length;k++)R[k][0]===`
`&&O++;return O>=R.length/2?`\r
`:"\r"}}function W(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ne(e){var t=(e=e||{}).delimiter,r=e.newline,a=e.comments,i=e.step,p=e.preview,x=e.fastMode,A=null,L=!1,g=e.quoteChar==null?'"':e.quoteChar,j=g;if(e.escapeChar!==void 0&&(j=e.escapeChar),(typeof t!="string"||-1<u.BAD_DELIMITERS.indexOf(t))&&(t=","),a===t)throw new Error("Comment character same as delimiter");a===!0?a="#":(typeof a!="string"||-1<u.BAD_DELIMITERS.indexOf(a))&&(a=!1),r!==`
`&&r!=="\r"&&r!==`\r
`&&(r=`
`);var n=0,l=!1;this.parse=function(o,d,s){if(typeof o!="string")throw new Error("Input must be a string");var v=o.length,C=t.length,I=r.length,z=a.length,m=b(i),y=[],R=[],c=[],T=n=0;if(!o)return N();if(x||x!==!1&&o.indexOf(g)===-1){for(var O=o.split(r),k=0;k<O.length;k++){if(c=O[k],n+=c.length,k!==O.length-1)n+=r.length;else if(s)return N();if(!a||c.substring(0,z)!==a){if(m){if(y=[],Q(c.split(t)),H(),l)return N()}else Q(c.split(t));if(p&&p<=k)return y=y.slice(0,p),N(!0)}}return N()}for(var E=o.indexOf(t,n),_=o.indexOf(r,n),q=new RegExp(W(j)+W(g),"g"),f=o.indexOf(g,n);;)if(o[n]===g)for(f=n,n++;;){if((f=o.indexOf(g,f+1))===-1)return s||R.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:y.length,index:n}),B();if(f===v-1)return B(o.substring(n,f).replace(q,g));if(g===j&&o[f+1]===j)f++;else if(g===j||f===0||o[f-1]!==j){E!==-1&&E<f+1&&(E=o.indexOf(t,f+1));var S=ie((_=_!==-1&&_<f+1?o.indexOf(r,f+1):_)===-1?E:Math.min(E,_));if(o.substr(f+1+S,C)===t){c.push(o.substring(n,f).replace(q,g)),o[n=f+1+S+C]!==g&&(f=o.indexOf(g,n)),E=o.indexOf(t,n),_=o.indexOf(r,n);break}if(S=ie(_),o.substring(f+1+S,f+1+S+I)===r){if(c.push(o.substring(n,f).replace(q,g)),ue(f+1+S+I),E=o.indexOf(t,n),f=o.indexOf(g,n),m&&(H(),l))return N();if(p&&y.length>=p)return N(!0);break}R.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:y.length,index:n}),f++}}else if(a&&c.length===0&&o.substring(n,n+z)===a){if(_===-1)return N();n=_+I,_=o.indexOf(r,n),E=o.indexOf(t,n)}else if(E!==-1&&(E<_||_===-1))c.push(o.substring(n,E)),n=E+C,E=o.indexOf(t,n);else{if(_===-1)break;if(c.push(o.substring(n,_)),ue(_+I),m&&(H(),l))return N();if(p&&y.length>=p)return N(!0)}return B();function Q(D){y.push(D),T=n}function ie(D){var F=0;return F=D!==-1&&(D=o.substring(f+1,D))&&D.trim()===""?D.length:F}function B(D){return s||(D===void 0&&(D=o.substring(n)),c.push(D),n=v,Q(c),m&&H()),N()}function ue(D){n=D,Q(c),c=[],_=o.indexOf(r,n)}function N(D){if(e.header&&!d&&y.length&&!L){var F=y[0],J={},_e=new Set(F);let ye=!1;for(let ae=0;ae<F.length;ae++){let K=F[ae];if(J[K=b(e.transformHeader)?e.transformHeader(K,ae):K]){let ce,be=J[K];for(;ce=K+"_"+be,be++,_e.has(ce););_e.add(ce),F[ae]=ce,J[K]++,ye=!0,(A=A===null?{}:A)[ce]=K}else J[K]=1,F[ae]=K;_e.add(K)}ye&&console.warn("Duplicate headers found and renamed."),L=!0}return{data:y,errors:R,meta:{delimiter:t,linebreak:r,aborted:l,truncated:!!D,cursor:T+(d||0),renamedHeaders:A}}}function H(){i(N()),y=[],R=[]}},this.abort=function(){l=!0},this.getCharIndex=function(){return n}}function ge(e){var t=e.data,r=Y[t.workerId],a=!1;if(t.error)r.userError(t.error,t.file);else if(t.results&&t.results.data){var i={abort:function(){a=!0,he(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:se,resume:se};if(b(r.userStep)){for(var p=0;p<t.results.data.length&&(r.userStep({data:t.results.data[p],errors:t.results.errors,meta:t.results.meta},i),!a);p++);delete t.results}else b(r.userChunk)&&(r.userChunk(t.results,i,t.file),delete t.results)}t.finished&&!a&&he(t.workerId,t.results)}function he(e,t){var r=Y[e];b(r.userComplete)&&r.userComplete(t),r.terminate(),delete Y[e]}function se(){throw new Error("Not implemented.")}function de(e){if(typeof e!="object"||e===null)return e;var t,r=Array.isArray(e)?[]:{};for(t in e)r[t]=de(e[t]);return r}function $(e,t){return function(){e.apply(t,arguments)}}function b(e){return typeof e=="function"}return u.parse=function(e,t){var r=(t=t||{}).dynamicTyping||!1;if(b(r)&&(t.dynamicTypingFunction=r,r={}),t.dynamicTyping=r,t.transform=!!b(t.transform)&&t.transform,!t.worker||!u.WORKERS_SUPPORTED)return r=null,u.NODE_STREAM_INPUT,typeof e=="string"?(e=(a=>a.charCodeAt(0)!==65279?a:a.slice(1))(e),r=new(t.download?ee:V)(t)):e.readable===!0&&b(e.read)&&b(e.on)?r=new re(t):(w.File&&e instanceof File||e instanceof Object)&&(r=new te(t)),r.stream(e);(r=(()=>{var a;return!!u.WORKERS_SUPPORTED&&(a=(()=>{var i=w.URL||w.webkitURL||null,p=le.toString();return u.BLOB_URL||(u.BLOB_URL=i.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",p,")();"],{type:"text/javascript"})))})(),(a=new w.Worker(a)).onmessage=ge,a.id=fe++,Y[a.id]=a)})()).userStep=t.step,r.userChunk=t.chunk,r.userComplete=t.complete,r.userError=t.error,t.step=b(t.step),t.chunk=b(t.chunk),t.complete=b(t.complete),t.error=b(t.error),delete t.worker,r.postMessage({input:e,config:t,workerId:r.id})},u.unparse=function(e,t){var r=!1,a=!0,i=",",p=`\r
`,x='"',A=x+x,L=!1,g=null,j=!1,n=((()=>{if(typeof t=="object"){if(typeof t.delimiter!="string"||u.BAD_DELIMITERS.filter(function(d){return t.delimiter.indexOf(d)!==-1}).length||(i=t.delimiter),typeof t.quotes!="boolean"&&typeof t.quotes!="function"&&!Array.isArray(t.quotes)||(r=t.quotes),typeof t.skipEmptyLines!="boolean"&&typeof t.skipEmptyLines!="string"||(L=t.skipEmptyLines),typeof t.newline=="string"&&(p=t.newline),typeof t.quoteChar=="string"&&(x=t.quoteChar),typeof t.header=="boolean"&&(a=t.header),Array.isArray(t.columns)){if(t.columns.length===0)throw new Error("Option columns is empty");g=t.columns}t.escapeChar!==void 0&&(A=t.escapeChar+x),t.escapeFormulae instanceof RegExp?j=t.escapeFormulae:typeof t.escapeFormulae=="boolean"&&t.escapeFormulae&&(j=/^[=+\-@\t\r].*$/)}})(),new RegExp(W(x),"g"));if(typeof e=="string"&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return l(null,e,L);if(typeof e[0]=="object")return l(g||Object.keys(e[0]),e,L)}else if(typeof e=="object")return typeof e.data=="string"&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||g),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:typeof e.data[0]=="object"?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||typeof e.data[0]=="object"||(e.data=[e.data])),l(e.fields||[],e.data||[],L);throw new Error("Unable to serialize unrecognized input");function l(d,s,v){var C="",I=(typeof d=="string"&&(d=JSON.parse(d)),typeof s=="string"&&(s=JSON.parse(s)),Array.isArray(d)&&0<d.length),z=!Array.isArray(s[0]);if(I&&a){for(var m=0;m<d.length;m++)0<m&&(C+=i),C+=o(d[m],m);0<s.length&&(C+=p)}for(var y=0;y<s.length;y++){var R=(I?d:s[y]).length,c=!1,T=I?Object.keys(s[y]).length===0:s[y].length===0;if(v&&!I&&(c=v==="greedy"?s[y].join("").trim()==="":s[y].length===1&&s[y][0].length===0),v==="greedy"&&I){for(var O=[],k=0;k<R;k++){var E=z?d[k]:k;O.push(s[y][E])}c=O.join("").trim()===""}if(!c){for(var _=0;_<R;_++){0<_&&!T&&(C+=i);var q=I&&z?d[_]:_;C+=o(s[y][q],_)}y<s.length-1&&(!v||0<R&&!T)&&(C+=p)}}return C}function o(d,s){var v,C;return d==null?"":d.constructor===Date?JSON.stringify(d).slice(1,25):(C=!1,j&&typeof d=="string"&&j.test(d)&&(d="'"+d,C=!0),v=d.toString().replace(n,A),(C=C||r===!0||typeof r=="function"&&r(d,s)||Array.isArray(r)&&r[s]||((I,z)=>{for(var m=0;m<z.length;m++)if(-1<I.indexOf(z[m]))return!0;return!1})(v,u.BAD_DELIMITERS)||-1<v.indexOf(i)||v.charAt(0)===" "||v.charAt(v.length-1)===" ")?x+v+x:v)}},u.RECORD_SEP="",u.UNIT_SEP="",u.BYTE_ORDER_MARK="\uFEFF",u.BAD_DELIMITERS=["\r",`
`,'"',u.BYTE_ORDER_MARK],u.WORKERS_SUPPORTED=!X&&!!w.Worker,u.NODE_STREAM_INPUT=1,u.LocalChunkSize=10485760,u.RemoteChunkSize=5242880,u.DefaultDelimiter=",",u.Parser=ne,u.ParserHandle=pe,u.NetworkStreamer=ee,u.FileStreamer=te,u.StringStreamer=V,u.ReadableStreamStreamer=re,w.jQuery&&((G=w.jQuery).fn.parse=function(e){var t=e.config||{},r=[];return this.each(function(p){if(!(G(this).prop("tagName").toUpperCase()==="INPUT"&&G(this).attr("type").toLowerCase()==="file"&&w.FileReader)||!this.files||this.files.length===0)return!0;for(var x=0;x<this.files.length;x++)r.push({file:this.files[x],inputElem:this,instanceConfig:G.extend({},t)})}),a(),this;function a(){if(r.length===0)b(e.complete)&&e.complete();else{var p,x,A,L,g=r[0];if(b(e.before)){var j=e.before(g.file,g.inputElem);if(typeof j=="object"){if(j.action==="abort")return p="AbortError",x=g.file,A=g.inputElem,L=j.reason,void(b(e.error)&&e.error({name:p},x,A,L));if(j.action==="skip")return void i();typeof j.config=="object"&&(g.instanceConfig=G.extend(g.instanceConfig,j.config))}else if(j==="skip")return void i()}var n=g.instanceConfig.complete;g.instanceConfig.complete=function(l){b(n)&&n(l,g.file,g.inputElem),i()},u.parse(g.file,g.instanceConfig)}}function i(){r.splice(0,1),a()}}),P&&(w.onmessage=function(e){e=e.data,u.WORKER_ID===void 0&&e&&(u.WORKER_ID=e.workerId),typeof e.input=="string"?w.postMessage({workerId:u.WORKER_ID,results:u.parse(e.input,e.config),finished:!0}):(w.File&&e.input instanceof File||e.input instanceof Object)&&(e=u.parse(e.input,e.config))&&w.postMessage({workerId:u.WORKER_ID,results:e,finished:!0})}),(ee.prototype=Object.create(U.prototype)).constructor=ee,(te.prototype=Object.create(U.prototype)).constructor=te,(V.prototype=Object.create(V.prototype)).constructor=V,(re.prototype=Object.create(U.prototype)).constructor=re,u})}(me)),me.exports}var De=Oe();const Ie=we(De),Le=()=>{const oe="/api/v1",[Z,le]=M.useState([]),[w,G]=M.useState([]),[X,P]=M.useState(!1),[Y,fe]=M.useState(!1),[u,U]=M.useState(""),[ee,te]=M.useState(""),[V,re]=M.useState(!1),[pe,W]=M.useState(!1),[ne,ge]=M.useState(null),[he,se]=M.useState(""),de=Ee(),[$,b]=M.useState(0),[e,t]=M.useState(0),r=10;M.useEffect(()=>{a(e,r)},[ne,e,r]);const a=async(n=0,l=r)=>{P(!0);try{const o=localStorage.getItem("token"),d=n*l,s=await fetch(`${oe}/get-data-train?skip=${d}&limit=${l}`,{method:"GET",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"}});if(s.status===401){const C=await s.json();se(C.detail),x("Thông báo","Phiên đăng nhập đã hết hạn, vui lòng đăng nhập lại.",!0),P(!1);return}const v=await s.json();if(v&&Array.isArray(v.content)){if(le(v.content),v.totalCount){const C=Math.ceil(v.totalCount/l);b(C)}}else le([]);t(n)}catch{x("Lỗi","Có lỗi xảy ra khi tải dữ liệu.",!0)}finally{P(!1)}},i=n=>{ge(n),W(!0)},p=async()=>{W(!1),P(!0);try{const n=localStorage.getItem("token"),l=await fetch(`${oe}/informations/${ne}`,{method:"DELETE",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}});if(l.status===401){const o=await l.json();se(o.detail),x("Thông báo","Phiên đăng nhập đã hết hạn, vui lòng đăng nhập lại.",!0),P(!1);return}l.ok?x("Thành công","Xóa thành công!",!1):x("Lỗi","Xóa không thành công.",!0)}catch{x("Lỗi","Có lỗi xảy ra khi xóa.",!0)}finally{P(!1),ge(null)}},x=(n,l,o)=>{U(n),te(l),re(o),fe(!0)},A=()=>{fe(!1),(he=="invalid_token"||he=="jwt_error")&&(localStorage.removeItem("token"),localStorage.removeItem("username"),localStorage.removeItem("roles"),de("/"))},L=n=>n.map(l=>{let o={GUID:l.id,age:l.age,gender:l.gender,education:l.education,income:l.income,employed:l.employed,jobCode:l.jobCode,profession:l.profession};return l.listAnswer.forEach((d,s)=>{o[`question${s+1}`]=d.selected_answer}),l.listJobcomment.forEach((d,s)=>{o[`suggested_code${s+1}`]=d.jobrecommendCode,o[`suggested_job${s+1}`]=d.jobrecommendValue}),o}),g=async()=>{P(!0);try{const n=localStorage.getItem("token"),l=await fetch(`${oe}/get-file`,{method:"GET",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}});if(l.status===401){const d=await l.json();se(d.detail),x("Thông báo","Phiên đăng nhập đã hết hạn, vui lòng đăng nhập lại.",!0),P(!1);return}const o=await l.json();G(o)}catch{x("Lỗi","Có lỗi xảy ra khi tải dữ liệu.",!0)}finally{P(!1)}};M.useEffect(()=>{w&&w.length>0&&j()},[w]);const j=()=>{const n=L(w),l="\uFEFF"+Ie.unparse(n),o=new Blob([l],{type:"text/csv;charset=utf-8;"}),d=URL.createObjectURL(o),s=document.createElement("a");s.href=d,s.download="training_data.csv",document.body.appendChild(s),s.click(),document.body.removeChild(s)};return h.jsxs("div",{className:"flex items-center justify-center min-h-screen p-4 bg-gray-100 relative w-full",children:[X&&h.jsx("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-50 flex items-center justify-center z-50",children:h.jsx(ve,{})}),h.jsxs("div",{className:"container mx-auto p-1",children:[h.jsxs("button",{onClick:g,className:"px-4 py-2 bg-green-500 text-white rounded mb-4 flex items-center gap-2",children:[h.jsx(je,{})," Tải dữ liệu"]}),h.jsxs("div",{className:"bg-white p-1 rounded shadow-md w-full",children:[h.jsx("h2",{className:"text-2xl mb-4 text-gray-800",children:"Dữ liệu huấn luyện"}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 overflow-x-auto",children:h.jsxs("table",{className:"min-w-full bg-white",children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{className:"py-2 px-4 border-b",children:"ID"}),h.jsx("th",{className:"py-2 px-4 border-b",children:"Giới tính"}),h.jsx("th",{className:"py-2 px-4 border-b",children:"Tuổi"}),h.jsx("th",{className:"py-2 px-4 border-b",children:"Học vấn"}),h.jsx("th",{className:"py-2 px-4 border-b",children:"Thu nhập"}),h.jsx("th",{className:"py-2 px-4 border-b",children:"Việc làm"}),h.jsx("th",{className:"py-2 px-4 border-b",children:"Mã nghề"}),h.jsx("th",{className:"py-2 px-4 border-b",children:"Nghề nghiệp"}),Z.length>0&&Z[0].listAnswer.map((n,l)=>h.jsxs("th",{className:"py-2 px-4 border-b",children:["Câu ",l+1]},`question-${l}`)),Z.length>0&&Z[0].listJobcomment.map((n,l)=>h.jsxs(xe.Fragment,{children:[h.jsxs("th",{className:"py-2 px-4 border-b",children:["Mã nghề ",l+1]}),h.jsxs("th",{className:"py-2 px-4 border-b",children:["Nghề nghiệp ",l+1]})]},`job-header-${l}`)),h.jsx("th",{className:"py-2 px-4 border-b",children:"Xóa"})]})}),h.jsx("tbody",{children:Z.map(n=>h.jsxs("tr",{children:[h.jsx("td",{className:"py-2 px-4 border-b",children:n.id}),h.jsx("td",{className:"py-2 px-4 border-b",children:n.gender}),h.jsx("td",{className:"py-2 px-4 border-b",children:n.age}),h.jsx("td",{className:"py-2 px-4 border-b",children:n.education}),h.jsx("td",{className:"py-2 px-4 border-b",children:n.income}),h.jsx("td",{className:"py-2 px-4 border-b",children:n.employed}),h.jsx("td",{className:"py-2 px-4 border-b",children:n.jobCode}),h.jsx("td",{className:"py-2 px-4 border-b",children:n.profession}),n.listAnswer.map((l,o)=>h.jsx("td",{className:"py-2 px-4 border-b",children:l.selected_answer},`answer-${n.id}-${o}`)),n.listJobcomment.map((l,o)=>h.jsxs(xe.Fragment,{children:[h.jsx("td",{className:"py-2 px-4 border-b",children:l.jobrecommendCode}),h.jsx("td",{className:"py-2 px-4 border-b",children:l.jobrecommendValue})]},`job-data-${n.id}-${o}`)),h.jsx("td",{className:"py-2 px-4 border-b",children:h.jsxs("button",{onClick:()=>i(n.id),className:"text-red-500 hover:text-red-700 flex items-center",children:[h.jsx(Ce,{}),h.jsx("span",{className:"hidden sm:inline",children:"Xóa"})]})})]},n.id))})]})}),h.jsxs("div",{className:"flex justify-center mt-4",children:[h.jsx("button",{onClick:()=>t(e-1),disabled:e<=0,className:"px-4 py-2 bg-blue-500 text-white rounded mr-2 disabled:bg-gray-400 disabled:cursor-not-allowed",children:"Trước"}),h.jsx("span",{className:"px-4 py-2",children:`Trang ${e+1} / ${$}`}),h.jsx("button",{onClick:()=>t(e+1),disabled:e>=$-1,className:"px-4 py-2 bg-blue-500 text-white rounded ml-2 disabled:bg-gray-400 disabled:cursor-not-allowed",children:"Sau"})]})]})]}),h.jsx(Re,{isOpen:pe,onClose:()=>W(!1),onConfirm:p,title:"Xác nhận xóa",message:"Bạn có chắc chắn muốn xóa sở thích này không?"}),h.jsx(Se,{isOpen:Y,onClose:A,title:u,message:ee,isError:V})]})};export{Le as default};
